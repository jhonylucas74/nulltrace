# Plano: Adicionar i18n ao Frontend (nulltrace-client)

> **Arquivo versionado em:** `nulltrace-client/I18N.md`

## Contexto

O frontend do nulltrace tem ~150+ strings hardcoded em inglês espalhadas por 40+ componentes. Não existe nenhuma infraestrutura de i18n. O objetivo é:
1. Instalar e configurar `i18next` + `react-i18next`
2. Criar estrutura de pastas `src/language/en/` com arquivos de tradução
3. Substituir cada string hardcoded por uma chave de tradução via `t('chave')`

> **Instrução para a IA implementadora:** Após concluir cada item, marque o checkbox com `[x]`.

---

## Fase 1 — Setup da Infraestrutura

- [x] Criar `nulltrace-client/I18N.md` com o conteúdo deste plano (cópia versionada no repo)
- [x] Instalar dependências: `npm install i18next react-i18next`
- [x] Criar `nulltrace-client/src/language/en/common.json` — strings globais (botões, labels genéricos)
- [x] Criar `nulltrace-client/src/language/en/apps.json` — nomes e descrições dos apps
- [x] Criar `nulltrace-client/src/language/en/email.json` — strings do EmailApp
- [x] Criar `nulltrace-client/src/language/en/notifications.json` — strings do NotificationDrawer
- [x] Criar `nulltrace-client/src/language/en/settings.json` — strings do SettingsApp
- [x] Criar `nulltrace-client/src/language/en/terminal.json` — strings do Terminal
- [x] Criar `nulltrace-client/src/language/en/login.json` — strings da tela de Login
- [x] Criar `nulltrace-client/src/language/i18n.ts` — configuração do i18next (importa todos os namespaces)
- [x] Importar `i18n.ts` no `nulltrace-client/src/main.tsx`

### Estrutura esperada de `src/language/`

```
src/language/
├── i18n.ts
└── en/
    ├── common.json
    ├── apps.json
    ├── email.json
    ├── notifications.json
    ├── settings.json
    ├── terminal.json
    └── login.json
```

---

## Fase 2 — Conteúdo dos arquivos de tradução

### `en/common.json`
```json
{
  "cancel": "Cancel",
  "delete": "Delete",
  "send": "Send",
  "clear_all": "Clear all",
  "loading": "Loading…",
  "reply": "Reply",
  "restore": "Restore",
  "no_messages": "No messages.",
  "end_session": "End session",
  "quit_game": "Quit game",
  "power_options": "Power options",
  "search_apps": "Search apps…",
  "no_results": "No results",
  "message_sent": "Message sent.",
  "app_launcher": "App launcher"
}
```

### `en/apps.json`
```json
{
  "terminal": "Terminal",
  "files": "Files",
  "browser": "Browser",
  "code": "Code",
  "theme": "Theme",
  "mail": "Mail",
  "wallet": "Wallet",
  "nullfetch": "Nullfetch",
  "shortcuts": "Shortcuts",
  "system_monitor": "System Monitor",
  "nullcloud": "NullCloud",
  "hackerboard": "Hackerboard",
  "startup": "Startup",
  "background": "Background",
  "settings": "Settings",
  "traceroute": "TraceRoute",
  "store": "Store",
  "pixel_art": "Pixel Art",
  "packet": "Packet",
  "codelab": "Codelab",
  "disk_manager": "Disk Manager",
  "all_apps": "All Apps",
  "sound": "Sound",
  "network": "Network",
  "minesweeper": "Minesweeper",
  "proc_spy": "Proc Spy",
  "devtools": "DevTools",
  "desc_terminal": "Command-line terminal for the system.",
  "desc_files": "Browse and manage files and folders.",
  "desc_browser": "Browse the web.",
  "desc_code": "Edit code and text files.",
  "desc_theme": "Change desktop theme and appearance.",
  "desc_mail": "Send and read mail.",
  "desc_wallet": "Manage balance and payments.",
  "desc_pixel_art": "Create and edit pixel art.",
  "desc_nullfetch": "View system information.",
  "desc_shortcuts": "View and customize keyboard shortcuts.",
  "desc_system_monitor": "Monitor CPU, memory, and processes.",
  "desc_proc_spy": "Spy on VM processes: view and inject stdin and stdout in real time.",
  "desc_nullcloud": "Cloud machines and VPS.",
  "desc_hackerboard": "Leaderboard and challenges.",
  "desc_startup": "Choose which apps start with the system.",
  "desc_background": "Set desktop background and grid.",
  "desc_settings": "Window and display preferences.",
  "desc_traceroute": "Trace network routes on a world map.",
  "desc_sound": "System sound mixer and volume.",
  "desc_network": "Network connections and status.",
  "desc_minesweeper": "Classic minesweeper game.",
  "desc_official": "Official app."
}
```

### `en/email.json`
```json
{
  "loading_account": "Loading email account…",
  "compose": "Compose",
  "inbox": "Inbox",
  "sent": "Sent",
  "spam": "Spam",
  "trash": "Trash",
  "to": "To",
  "from": "From",
  "subject": "Subject",
  "date": "Date",
  "new_badge": "New",
  "no_deleted": "No deleted messages.",
  "no_spam": "No spam messages.",
  "no_sent": "No sent messages.",
  "no_messages": "No messages.",
  "placeholder_to": "recipient@mail.null or pick a contact",
  "cc": "CC",
  "placeholder_cc": "cc@mail.null (optional)",
  "bcc": "Cco (Bcc)",
  "placeholder_bcc": "bcc@mail.null (optional)",
  "placeholder_body": "Write your message…",
  "mark_spam": "Mark as spam",
  "not_spam": "Not spam",
  "delete_forever": "Delete forever",
  "select_prompt": "Select a message or click Compose.",
  "reply_prefix": "Re:"
}
```

### `en/notifications.json`
```json
{
  "title": "Notifications",
  "empty": "No notifications",
  "remove": "Remove notification",
  "remove_named": "Remove {{title}} notification",
  "just_now": "Just now",
  "mins_ago": "{{count}} min ago",
  "hours_ago": "{{count}} hour(s) ago",
  "days_ago": "{{count}} day(s) ago"
}
```

### `en/settings.json`
```json
{
  "title": "Settings",
  "config_window": "Config Window",
  "window_hint": "Options for the game window. Fullscreen applies immediately; start maximized applies on next launch.",
  "fullscreen": "Fullscreen",
  "fullscreen_hint": "Run the game in fullscreen. Applies immediately when toggled.",
  "start_maximized": "Start maximized",
  "maximized_unavailable": "Unavailable when fullscreen is enabled.",
  "maximized_hint": "Maximize the window when the app launches."
}
```

### `en/terminal.json`
```json
{
  "welcome": "Welcome to nulltrace. Type 'help' for commands.",
  "shell_error": "Unexpected error. Could not load the shell (missing or corrupted). The terminal will close.",
  "error_title": "Unexpected Error",
  "memory_limit_title": "Memory Limit Reached",
  "processes_killed": "All processes have been killed.",
  "new_session_hint": "You can open a new terminal session to continue.",
  "session_ended": "Session ended.",
  "command_input": "Command input"
}
```

### `en/login.json`
```json
{
  "server_error": "Cannot reach server. Check that the backend is running.",
  "password_placeholder": "Password",
  "session_label": "Session: Nulltrace · Press Enter to sign in",
  "create_user": "Create new user"
}
```

---

## Fase 3 — Aplicar traduções nos componentes

### `src/screens/Login.tsx`
- [x] Importar `useTranslation` do `react-i18next` com namespace `login`
- [x] `"Cannot reach server..."` → `t('server_error')`
- [x] `"Password"` → `t('password_placeholder')`
- [x] `"Session: Nulltrace · Press Enter to sign in"` → `t('session_label')`
- [x] `"Create new user"` → `t('create_user')`
- [x] `"Power options"` → `t('common:power_options')`
- [x] `"Quit game"` → `t('common:quit_game')`

### `src/components/TopBar.tsx`
- [x] Importar `useTranslation` com namespace `common`
- [x] `"Notifications"` → `t('notifications:title')`
- [x] `"Network"` → `t('apps:network')`
- [x] `"Sound"` → `t('apps:sound')`
- [x] `"Settings"` → `t('apps:settings')`
- [x] `"End session"` → `t('end_session')`

### `src/components/Terminal.tsx`
- [x] Importar `useTranslation` com namespace `terminal`
- [x] `"Welcome to nulltrace..."` → `t('welcome')`
- [x] `"Unexpected error..."` → `t('shell_error')`
- [x] `"Unexpected Error"` (modal title) → `t('error_title')`
- [x] `"Memory Limit Reached"` → `t('memory_limit_title')`
- [x] `"All processes have been killed."` → `t('processes_killed')`
- [x] `"You can open a new terminal session..."` → `t('new_session_hint')`
- [x] `"Session ended."` → `t('session_ended')`
- [x] `"Command input"` (aria-label) → `t('command_input')`

### `src/components/EmailApp.tsx`
- [x] Importar `useTranslation` com namespace `email`
- [x] `"Loading email account…"` → `t('loading_account')`
- [x] `"Compose"` → `t('compose')`
- [x] `"Inbox"` → `t('inbox')`
- [x] `"Sent"` → `t('sent')`
- [x] `"Spam"` → `t('spam')`
- [x] `"Trash"` → `t('trash')`
- [x] `"To"` → `t('to')`
- [x] `"From"` → `t('from')`
- [x] `"Subject"` → `t('subject')`
- [x] `"Date"` → `t('date')`
- [x] `"Loading…"` → `t('common:loading')`
- [x] `"New"` (badge) → `t('new_badge')`
- [x] `"No deleted messages."` → `t('no_deleted')`
- [x] `"No spam messages."` → `t('no_spam')`
- [x] `"No sent messages."` → `t('no_sent')`
- [x] `"No messages."` → `t('no_messages')`
- [x] `"Message sent."` → `t('common:message_sent')`
- [x] `"recipient@mail.null or pick a contact"` → `t('placeholder_to')`
- [x] `"CC"` → `t('cc')`
- [x] `"cc@mail.null (optional)"` → `t('placeholder_cc')`
- [x] `"Cco (Bcc)"` → `t('bcc')`
- [x] `"bcc@mail.null (optional)"` → `t('placeholder_bcc')`
- [x] `"Write your message…"` → `t('placeholder_body')`
- [x] `"Send"` → `t('common:send')`
- [x] `"Cancel"` → `t('common:cancel')`
- [x] `"Clear all"` → `t('common:clear_all')`
- [x] `"Reply"` → `t('common:reply')`
- [x] `"Mark as spam"` → `t('mark_spam')`
- [x] `"Delete"` → `t('common:delete')`
- [x] `"Not spam"` → `t('not_spam')`
- [x] `"Restore"` → `t('common:restore')`
- [x] `"Delete forever"` → `t('delete_forever')`
- [x] `"Select a message or click Compose."` → `t('select_prompt')`
- [x] `"Re:"` (reply prefix) → `t('reply_prefix')`

### `src/components/AppLauncher.tsx`
- [x] Importar `useTranslation` com namespace `common`
- [x] `"Search apps…"` → `t('search_apps')`
- [x] `"No results"` → `t('no_results')`
- [x] `"Search apps"` (aria-label) → `t('search_apps')`
- [x] `"App launcher"` → `t('app_launcher')`

### `src/components/NotificationDrawer.tsx`
- [x] Importar `useTranslation` com namespace `notifications`
- [x] `"Notifications"` → `t('title')`
- [x] `"No notifications"` → `t('empty')`
- [x] `"Clear all"` → `t('common:clear_all')`
- [x] `"Remove notification"` → `t('remove')`
- [x] `"Remove {item.title} notification"` → `t('remove_named', { title: item.title })`
- [x] `"Just now"` → `t('just_now')`
- [x] `"{diffMins} min ago"` → `t('mins_ago', { count: diffMins })`
- [x] `"{diffHours} hour(s) ago"` → `t('hours_ago', { count: diffHours })`
- [x] `"{diffDays} day(s) ago"` → `t('days_ago', { count: diffDays })`

### `src/components/SettingsApp.tsx`
- [x] Importar `useTranslation` com namespace `settings`
- [x] `"Settings"` → `t('title')`
- [x] `"Config Window"` → `t('config_window')`
- [x] `"Options for the game window..."` → `t('window_hint')`
- [x] `"Fullscreen"` → `t('fullscreen')`
- [x] `"Run the game in fullscreen..."` → `t('fullscreen_hint')`
- [x] `"Start maximized"` → `t('start_maximized')`
- [x] `"Unavailable when fullscreen is enabled."` → `t('maximized_unavailable')`
- [x] `"Maximize the window when the app launches."` → `t('maximized_hint')`

### `src/lib/appList.tsx`
- [x] Mudar de objeto estático para função que usa `t()` com namespace `apps`
- [x] Todos os `label` dos apps → chaves em `apps.json`
- [x] Todos os `title` de janelas → chaves em `apps.json`

### `src/lib/storeCatalog.tsx`
- [x] Mudar descrições para chaves no namespace `apps`
- [x] Todas as `description` dos apps → `desc_*` em `apps.json`

---

## Fase 4 — Verificação

- [x] Confirmar que `npm run dev` inicia sem erros de import
- [x] Confirmar que todas as strings visíveis no UI estão sendo lidas do `en/*.json`
- [x] Verificar que nenhuma string hardcoded em inglês restou nos arquivos modificados
- [x] Verificar que os arquivos de tradução estão completos (sem chaves faltando no console)

---

## Arquivos críticos a modificar

| Arquivo | Namespace |
|---|---|
| `src/main.tsx` | — (import i18n config) |
| `src/language/i18n.ts` | — (config) |
| `src/language/en/common.json` | `common` |
| `src/language/en/apps.json` | `apps` |
| `src/language/en/email.json` | `email` |
| `src/language/en/notifications.json` | `notifications` |
| `src/language/en/settings.json` | `settings` |
| `src/language/en/terminal.json` | `terminal` |
| `src/language/en/login.json` | `login` |
| `src/screens/Login.tsx` | `login` |
| `src/components/TopBar.tsx` | `common`, `apps`, `notifications` |
| `src/components/Terminal.tsx` | `terminal` |
| `src/components/EmailApp.tsx` | `email`, `common` |
| `src/components/AppLauncher.tsx` | `common` |
| `src/components/NotificationDrawer.tsx` | `notifications`, `common` |
| `src/components/SettingsApp.tsx` | `settings` |
| `src/lib/appList.tsx` | `apps` |
| `src/lib/storeCatalog.tsx` | `apps` |

---

## Notas pós-implementação

- **common.json:** Foi adicionada a chave `ok` para botões de modal (ex.: Terminal).
- **login.json:** Foi adicionada a chave `invalid_credentials` para mensagem de erro de credenciais.
- **email.json:** O plano não mapeava: (1) `message` (label "Message" no corpo do email); (2) `load_more` (botão "Load more"); (3) `wrote` (texto "wrote" na citação de resposta). Todas foram adicionadas e usadas no EmailApp.
- **Dock.tsx** e **StoreApp.tsx** passaram a usar `t()` para títulos/labels do catálogo e `getAppTitle(..., t)`; não estavam na tabela do plano mas foram atualizados para consistência.
